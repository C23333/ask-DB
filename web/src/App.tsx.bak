import React, { useEffect } from 'react';
import { useAuthStore } from './stores/authStore';
import { LoginPage } from './pages/LoginPage';
import { EditorPage } from './pages/EditorPage';
import './App.css';

function App() {
  const { isAuthenticated, user } = useAuthStore();
  const [authChecked, setAuthChecked] = React.useState(false);

  useEffect(() => {
    // Check if user is already authenticated
    if (localStorage.getItem('auth_token')) {
      setAuthChecked(true);
    } else {
      setAuthChecked(true);
    }
  }, []);

  if (!authChecked) {
    return <div className="loading">Loading...</div>;
  }

  return (
    <div className="app">
      {isAuthenticated && user ? <EditorPage /> : <LoginPage />}
    </div>
  );
}

export default App;
